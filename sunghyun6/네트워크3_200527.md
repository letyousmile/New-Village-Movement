# 네트워크

### 웹 통신의 큰 흐름

#### 주소창에 URL을 입력하면 무슨 일이 일어날까?

##### 브라우저

1. url 에 입력된 값을 브라우저 내부에서 결정된 규칙에 따라 그 의미를 조사한다.
2. 조사된 의미에 따라 HTTP Req 메시지를 만든다.
3. 만들어진 메시지를 웹 서버로 전송한다.

*이 때 만들어진 메시지 전송은 브라우저가 직접하는 것이 아니라, OS에 의뢰해서 메시지를 전달한다. 도메인으로 하는 게 아니고 IP 주소로 메시지 받을 상대를 지정해야 하는데, 이 과정에서 DNS 서버를 조회한다*

##### 프로토콜 스택, LAN 어댑터

1. 프로토콜 스택이 브라우저로부터 메시지를 받는다
2. 메시지를 패킷 속에 저장한다.
3. 수신처 주소 등 제어정보를 덧붙인다
4. 패킷을 LAN 어댑터에 넘긴다
5. 어댑터는 패킷을 전기신호로 변환시킨다
6. 신호를 LAN 케이블에 송출시킨다.

##### 허브, 스위치, 라우터

1. LAN 어댑터가 송신한 패킷은 스위칭 허브를 경우하여 인터넷 접속용 라우터에 도착
2. 라우터는 패킷을 프로바이더에게 전달
3. 인터넷으로 들어감

##### 엑세스 회선, 프로바이더

1. 패킷은 인터넷의 입구에 있는 액세스 회선에 의해 POP(통신사용 라우터)까지 운반한다.
2. POP를 거쳐 인터넷의 핵심부로 들어가게 된다
3. 고속 라우터들 사이로 패킷이 목적지를 향해 흘러간다

##### 방화벽, 캐시서버

1. 패킷은 인터넷 핵심부를 통과하여, 웹 서버 측의 LAN에 도착한다
2. 기다리고 있던 방화벽이 도착한 패킷을 검사한다
3. 패킷이 웹서버까지 가야하는지 가지않아도 되는지를 판단하는 캐시서버가 있다. 
4. 굳이 갈 필요가 없으면 골라냄. 혹은 이미 캐시서버에 있는 데이터면 그냥 그거 뱉어줌 또는 다시 사용할 수 있는게 있으면 캐시 서버에 저장해놔서 속도 업

##### 웹 서버

1. 웹 서버의 프로토콜 스택은 패킷을 추출하고 메시지를 복원하여 웹 서버 어플리케이션 (WAS)에 넘김
2. 요청에 따른 데이터를 RESPONSE에 넣어 클라이언트로 회송
3. 왔던 방식 그대로 클라이언트에게 다시 전달한다

