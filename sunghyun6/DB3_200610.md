# DB

##### Transaction

- 트랜잭션이란?
  - 작업의 완전성을 보장해주는 것
  - 즉 논리적인 작업 셋을 모두 완벽하게 처리하거나 또는 처리하지 못할 경우 원상태로 복구
  - 작업의 논리적 단위를 이해할 수 있고, 시스템 입장에서는 접근-변경의 단위다
- LOCK
  - 락과 트랜잭션은 비슷한거 같지만 다름
  - 락은 동시성을 제어하기 위한 기능
  - 트랜잭션은 데이터의 정합성을 보장하기 위한 기능
  - 잠금은 여러 요청이 올 경우 순차적으로 하나의 커넥션만 하나의 자원에 접근하게 해줌
  - 트랜잭션은 논리적인 작업셋중 하나의 쿼리라도 잘못되면 다 백시키는 것!
- 특성
  - 원자성 - 중간에 문제발생하면 전부 다 롤백되야함
  - 일관성 - 일어나기 전의 상황과 동일하게 보장
  - 고립성 - 간섭없이 독립적으로 수행되야함
  - 지속성 - 종료되면 잘 저장되야함
- 주의점
  - 최소의 코드에만 적용하는게 좋음
  - 커넥션의 개수가 제한적인데, 소유하는 시간이 길어지면 개수가 줄어들고
  - 기다려야함 ->느려짐
- 교착상태(DEAD LOCK)
  - 복수의 트랜잭션을 사용하다보면 교착상태가 일어남
  - 두개이상의 트랜잭션이 특정 자원의 잠금을 획득하고 다른 트랜잭션이 소유하고 있는 잠금을 요구하면 아무리 기다려도 상황이 안바뀜 -> 교착상태